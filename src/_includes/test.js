function capitalize(e) { return e.charAt(0).toUpperCase() + e.slice(1) } function setSavedPreferredTheme() { const e = window.localStorage.getItem("theme"), t = document.querySelector("body"); "dark" === e && (appendCurrentThemeText("dark"), t.setAttribute("data-theme", "dark")), "light" === e && (appendCurrentThemeText("light"), t.setAttribute("data-theme", "light")) } function setDefaultTheme() { const e = document.querySelector("body"); if (!e.getAttribute("data-theme")) { if ("not all" !== window.matchMedia("(prefers-color-scheme)").media && window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches) return toggleMeta("dark"), appendCurrentThemeText("dark"), e.setAttribute("data-theme", "dark"); appendCurrentThemeText("light"), toggleMeta("light"), e.setAttribute("data-theme", "light") } } function toggleLogo(e) { const t = document.getElementById("logo"); if (!e) { e = document.querySelector("body").getAttribute("data-theme") } "light" === e && (t.innerHTML = '<img src="/images/logo.svg" alt="Craig Abbott signature logo" width="100">'), "dark" === e && (t.innerHTML = '<img src="/images/logo-dark.svg" alt="Craig Abbott signature logo" width="100">') } function toggleButtonText(e) { const t = document.getElementById("theme-toggle"), o = "Activate " + capitalize("dark" === e ? "light" : "dark") + " theme"; t.innerHTML = o } function appendCurrentThemeText(e) { const t = document.querySelector(".page-footer"), o = '<output class="visually-hidden" id="current-theme" for="theme-toggle" name="current-theme" aria-live="polite">' + e + " theme is currently active</output>"; t.innerHTML = t.innerHTML + o } function toggleCurrentThemeText(e) { document.getElementById("current-theme").innerHTML = e + " theme is currently active" } function changeTheme() { const e = document.querySelector("body"), t = e.getAttribute("data-theme"); return "light" === t ? (window.localStorage.setItem("theme", "dark"), toggleMeta("dark"), toggleLogo("dark"), toggleButtonText("dark"), toggleCurrentThemeText("dark"), e.setAttribute("data-theme", "dark")) : "dark" === t ? (window.localStorage.setItem("theme", "light"), toggleMeta("light"), toggleLogo("light"), toggleButtonText("light"), toggleCurrentThemeText("light"), e.setAttribute("data-theme", "light")) : void 0 } function addThemeToggle() { const e = document.querySelector("header"), t = '<div class="theme-toggle-container"><button type="button" id="theme-toggle" class="theme-toggle">' + ("Activate " + capitalize("dark" === document.querySelector("body").getAttribute("data-theme") ? "light" : "dark") + " theme") + "</button></div>"; e.innerHTML = e.innerHTML + t, document.getElementById("theme-toggle").addEventListener("click", (function () { changeTheme() })) } function toggleMeta(e) { const t = document.querySelectorAll("meta[name=theme-color]")[0]; "dark" === e && t.setAttribute("content", "#222222"), "light" === e && t.setAttribute("content", "#f9f9f9") } document.addEventListener("DOMContentLoaded", (function () { setSavedPreferredTheme(), setDefaultTheme(), toggleLogo(), addThemeToggle() }));